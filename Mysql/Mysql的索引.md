## Mysql为什么使用B+树而不是用红黑树


### 1. 磁盘 I/O 次数更少

- **红黑树**属于二叉树，树的高度相对较大。在数据量极大时，查找操作可能需要多次磁盘 I/O。
- **B+ 树**作为多路平衡树，每个节点能存储多个数据项以及多个子节点，这使得树的高度大幅降低。以高度为 3 的 B+ 树为例，它能够存储上亿条数据，查找时只需进行 3 次 I/O。

### 2. 范围查询效率更高

- **红黑树**若要进行范围查询，需中序遍历整棵树，时间复杂度为 O (n)，效率较低。
- **B+ 树**的所有数据都存于叶子节点，并且叶子节点之间通过指针相连。进行范围查询时，只需遍历叶子节点的链表即可，时间复杂度为 O (log n + m)，其中 m 为结果集的大小。

### 3. 磁盘读写更高效

- **B+ 树**的节点结构与磁盘块大小相适配，一次磁盘 I/O 可以读取一个完整的节点，减少了 I/O 次数。
- **红黑树**的节点只存储一个键值对，一次 I/O 读取的数据量较少，造成了浪费。

### 4. 查询性能更稳定

- **B+ 树**的所有查询都要到叶子节点才能完成，查询路径的长度一致，因此查询性能较为稳定。
- **红黑树**的查询性能会因节点位置的不同而有所波动。


## Mysql为什么使用B+树而不是使用哈希索引

### 1. **哈希索引不支持范围查询**

- **哈希表**的结构决定了它只支持精确匹配（如 `WHERE key = value`），无法高效处理范围查询（如 `WHERE key > value` 或 `BETWEEN`）。
- **B+ 树**的有序性使其可以通过索引扫描快速定位范围数据，适合区间查询。

### 2. **哈希冲突与性能波动**

- 当哈希冲突较多时，哈希索引的查找性能会从 O (1) 退化到 O (n)，而 B+ 树始终保持 O (log n) 的稳定性能。
- 哈希函数的选择也会影响冲突概率，需要额外优化。

### 3. **索引有序性的优势**

- B+ 树的索引和数据按顺序存储，支持排序操作（如 `ORDER BY`）和前缀匹配（如 `LIKE 'abc%'`）。
- 哈希索引无法利用索引有序性，排序需全表扫描。

### 4. **哈希索引不支持部分索引匹配**

- 对于复合索引（如 `(a, b)`），B+ 树可以利用索引前缀（如仅使用 `a` 列），而哈希索引必须使用全部索引列才能生效。

### 5. **自适应哈希索引的补充**

- MySQL 的 InnoDB 引擎提供了**自适应哈希索引**（Adaptive Hash Index），会自动为热点数据创建哈希索引，但这是基于 B+ 树索引的优化，而非替代。

### 适用场景对比

- 哈希索引

  适合：

    - 只有等值查询的场景（如缓存、KV 存储）。
    - 内存数据库（如 Redis），避免磁盘 I/O 影响哈希性能。

- B+ 树索引

  适合：

    - 范围查询、排序、前缀匹配等复杂查询。
    - 磁盘存储为主的关系型数据库。

##  Mysql为什么使用B+树而不是使用跳表

### 1. **哈希索引不支持范围查询**

- **哈希表**的结构决定了它只支持精确匹配（如 `WHERE key = value`），无法高效处理范围查询（如 `WHERE key > value` 或 `BETWEEN`）。
- **B+ 树**的有序性使其可以通过索引扫描快速定位范围数据，适合区间查询。

### 2. **哈希冲突与性能波动**

- 当哈希冲突较多时，哈希索引的查找性能会从 O (1) 退化到 O (n)，而 B+ 树始终保持 O (log n) 的稳定性能。
- 哈希函数的选择也会影响冲突概率，需要额外优化。

### 3. **索引有序性的优势**

- B+ 树的索引和数据按顺序存储，支持排序操作（如 `ORDER BY`）和前缀匹配（如 `LIKE 'abc%'`）。
- 哈希索引无法利用索引有序性，排序需全表扫描。

### 4. **哈希索引不支持部分索引匹配**

- 对于复合索引（如 `(a, b)`），B+ 树可以利用索引前缀（如仅使用 `a` 列），而哈希索引必须使用全部索引列才能生效。

### 5. **自适应哈希索引的补充**

- MySQL 的 InnoDB 引擎提供了**自适应哈希索引**（Adaptive Hash Index），会自动为热点数据创建哈希索引，但这是基于 B+ 树索引的优化，而非替代。

### 适用场景对比

- 哈希索引

  适合：

    - 只有等值查询的场景（如缓存、KV 存储）。
    - 内存数据库（如 Redis），避免磁盘 I/O 影响哈希性能。

- B+ 树索引

  适合：

    - 范围查询、排序、前缀匹配等复杂查询。
    - 磁盘存储为主的关系型数据库。